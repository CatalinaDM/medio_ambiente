{% extends "base.html" %}

{% block title %}Inicio - Conciencia Ambiental{% endblock %}

{% block content %}
<section class="hero-section">
    <div class="row align-items-center">
        <div class="col-lg-6 hero-content">
            <h1>Â¿Por quÃ© es importante cuidar el medio ambiente?</h1>
            <p class="lead">
                El medio ambiente es la base de la vida. Protegerlo garantiza bienestar,
                salud y recursos para las futuras generaciones. Cada acciÃ³n cuenta, cada 
                decisiÃ³n importa, cada persona hace la diferencia.
            </p>
            <div class="mt-4">
                <a href="/tres-r" class="btn btn-primary-custom me-2">
                     Descubre las 3 R
                </a>
                <a href="/sistema-ambiental" class="btn btn-outline-success">
                    ğŸ“š MÃ¡s informaciÃ³n
                </a>
            </div>
        </div>
        <div class="col-lg-6 hero-image">
            <img src="{{ url_for('static', filename='images/ambiente.jpg') }}" 
                 class="img-fluid" 
                 alt="Medio Ambiente">
        </div>
    </div>
</section>

<!-- Frases motivacionales rotativas -->
<section class="mt-5 animate-on-scroll">
    <div class="content-card" style="background: var(--gradient-ocean); color: white; border: none; text-align: center; padding: 2.5rem;">
        <h3 style="font-size: 1.8rem; font-weight: 700; margin-bottom: 1.5rem;">ğŸ’­ Frase del Momento</h3>
        <p id="rotating-quote" style="font-size: 1.4rem; line-height: 1.8; font-style: italic; min-height: 100px;"></p>
        <small id="quote-author" style="font-size: 1.1rem; opacity: 0.9;"></small>
    </div>
</section>

<!-- EstadÃ­sticas impactantes -->
<section class="stats-section animate-on-scroll">
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <div class="stat-card">
                    <div class="stat-number" data-target="8000000">0</div>
                    <div class="stat-label">ğŸŒŠ Toneladas de plÃ¡stico en ocÃ©anos/aÃ±o</div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="stat-card">
                    <div class="stat-number" data-target="137">0</div>
                    <div class="stat-label">ğŸ¦‹ Especies se extinguen diariamente</div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="stat-card">
                    <div class="stat-number" data-target="1.1">0</div>
                    <div class="stat-label">ğŸŒ¡ï¸ Â°C aumento temperatura global</div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Quiz interactivo -->
<section class="mt-5 pt-4 animate-on-scroll">
    <h2 class="text-center mb-5 text-gradient" style="font-weight: 700; font-size: 2.8rem;">
         Quiz Ambiental Interactivo
    </h2>
    <div class="quiz-container">
        <div id="quiz-content">
            <div class="quiz-question" id="question-text">Cargando pregunta...</div>
            <div id="quiz-options"></div>
            <div id="quiz-feedback" class="quiz-result" style="display: none;"></div>
            <div style="text-align: center; margin-top: 2rem;">
                <button id="next-question" class="btn btn-primary-custom" style="display: none;">
                    Siguiente Pregunta â†’
                </button>
                <div id="quiz-score" style="font-size: 1.3rem; font-weight: 700; margin-top: 1rem; color: var(--ocean-blue);"></div>
            </div>
        </div>
    </div>
</section>

<!-- Cards informativos -->
<section class="mt-5 pt-4 animate-on-scroll">
    <h2 class="text-center mb-5 text-gradient" style="font-weight: 700; font-size: 2.6rem;">
         Nuestro Compromiso con el Planeta
    </h2>
    <div class="row g-4">
        <div class="col-md-4">
            <div class="content-card text-center">
                <div style="font-size: 4rem; margin-bottom: 1rem;">ğŸŒ³</div>
                <h3 style="color: var(--ocean-blue); font-weight: 600; margin-bottom: 1rem;">ConservaciÃ³n Marina</h3>
                <p style="line-height: 1.8;">Los ocÃ©anos absorben 30% del COâ‚‚ que producimos y generan mÃ¡s del 50% del oxÃ­geno. Protegerlos es proteger nuestra vida.</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="content-card text-center">
                <div style="font-size: 4rem; margin-bottom: 1rem;">â™»ï¸</div>
                <h3 style="color: var(--aqua-green); font-weight: 600; margin-bottom: 1rem;">EconomÃ­a Circular</h3>
                <p style="line-height: 1.8;">Reducir, reutilizar y reciclar puede disminuir las emisiones de gases invernadero hasta un 85% en algunos materiales.</p>
            </div>
        </div>
        <div class="col-md-4">
            <div class="content-card text-center">
                <div style="font-size: 4rem; margin-bottom: 1rem;">ğŸŒ</div>
                <h3 style="color: var(--teal-bright); font-weight: 600; margin-bottom: 1rem;">EducaciÃ³n Transformadora</h3>
                <p style="line-height: 1.8;">70% de las personas cambian sus hÃ¡bitos cuando comprenden el impacto ambiental real de sus acciones diarias.</p>
            </div>
        </div>
    </div>
</section>

<!-- Datos curiosos -->
<section class="mt-5 pt-4 animate-on-scroll">
    <div class="content-card" style="background: linear-gradient(135deg, #e0f7fa 0%, #b2ebf2 100%); border: none;">
        <div class="row align-items-center">
            <div class="col-md-8">
                <h3 style="color: var(--sea-deep); font-weight: 700; margin-bottom: 1.5rem; font-size: 2rem;">
                    ğŸŒŠ Â¿SabÃ­as que...?
                </h3>
                <ul style="list-style: none; padding: 0; font-size: 1.1rem; color: #0d1b2a;">
                    <li style="margin-bottom: 1rem; padding-left: 2rem; position: relative;">
                        <span style="position: absolute; left: 0; font-size: 1.3rem;">ğŸ‹</span>
                        <strong>Las ballenas fertilizan el ocÃ©ano:</strong> Sus heces contienen hierro y nitrÃ³geno que alimentan al fitoplancton, produciendo el 50% del oxÃ­geno mundial
                    </li>
                    <li style="margin-bottom: 1rem; padding-left: 2rem; position: relative;">
                        <span style="position: absolute; left: 0; font-size: 1.3rem;">ğŸŒ²</span>
                        <strong>Un Ã¡rbol adulto:</strong> Produce oxÃ­geno para 2 personas y absorbe 22 kg de COâ‚‚ anualmente
                    </li>
                    <li style="margin-bottom: 1rem; padding-left: 2rem; position: relative;">
                        <span style="position: absolute; left: 0; font-size: 1.3rem;">ğŸ’§</span>
                        <strong>Crisis de agua dulce:</strong> Solo 0.007% del agua del planeta es potable y accesible
                    </li>
                    <li style="padding-left: 2rem; position: relative;">
                        <span style="position: absolute; left: 0; font-size: 1.3rem;">ğŸ</span>
                        <strong>Abejas en peligro:</strong> Polinizan 75% de nuestros cultivos, pero sus poblaciones han caÃ­do 40% en una dÃ©cada
                    </li>
                </ul>
            </div>
            <div class="col-md-4 text-center">
                <div style="font-size: 10rem; opacity: 0.3; animation: float-bubbles 8s infinite;">ğŸŒŠ</div>
            </div>
        </div>
    </div>
</section>

<!-- Llamado a la acciÃ³n -->
<section class="mt-5 pt-4 animate-on-scroll">
    <div class="content-card text-center" style="background: var(--gradient-ocean); color: white; border: none; padding: 3rem;">
        <h3 style="font-weight: 800; margin-bottom: 2rem; font-size: 2.5rem;">
            â° El ocÃ©ano del tiempo se agota
        </h3>
        <p style="font-size: 1.3rem; max-width: 750px; margin: 0 auto 2rem; line-height: 1.9;">
            Como las olas que no esperan, el cambio climÃ¡tico avanza. Pero como el mar que limpia las playas, 
            nuestras acciones pueden restaurar el equilibrio. <strong>No necesitas ser perfecto, solo comenzar.</strong>
        </p>
        <a href="/tres-r" class="btn btn-outline-success" style="border-color: white !important; color: white !important; font-size: 1.1rem;">
             Inicia tu transformaciÃ³n
        </a>
    </div>
</section>

{% endblock %}

{% block extra_scripts %}
<script>
    // ==================== FRASES MOTIVACIONALES ====================
    const quotes = [
        { text: "El ocÃ©ano es el corazÃ³n de nuestro planeta. Si protegemos el ocÃ©ano, nos protegemos a nosotros mismos.", author: "Sylvia Earle" },
        { text: "No heredamos la Tierra de nuestros ancestros; la tomamos prestada de nuestros hijos.", author: "Proverbio Nativo Americano" },
        { text: "El futuro dependerÃ¡ de lo que hagamos en el presente.", author: "Mahatma Gandhi" },
        { text: "Cuando bebas agua, recuerda la fuente.", author: "Proverbio Chino" },
        { text: "La Tierra no es una herencia de nuestros padres, sino un prÃ©stamo de nuestros hijos.", author: "Proverbio Keniano" },
        { text: "El mejor momento para plantar un Ã¡rbol fue hace 20 aÃ±os. El segundo mejor momento es ahora.", author: "Proverbio Chino" },
        { text: "SÃ© el cambio que quieres ver en el mundo.", author: "Mahatma Gandhi" }
    ];
    
    let currentQuoteIndex = 0;
    
    function rotateQuote() {
        const quoteElement = document.getElementById('rotating-quote');
        const authorElement = document.getElementById('quote-author');
        
        if (quoteElement && authorElement) {
            quoteElement.style.opacity = '0';
            authorElement.style.opacity = '0';
            
            setTimeout(() => {
                const quote = quotes[currentQuoteIndex];
                quoteElement.textContent = `"${quote.text}"`;
                authorElement.textContent = `â€” ${quote.author}`;
                
                quoteElement.style.opacity = '1';
                authorElement.style.opacity = '1';
                
                currentQuoteIndex = (currentQuoteIndex + 1) % quotes.length;
            }, 500);
        }
    }
    
    // ==================== QUIZ INTERACTIVO ====================
    const quizQuestions = [
        {
            question: "ğŸŒŠ Â¿QuÃ© porcentaje del oxÃ­geno que respiramos proviene de los ocÃ©anos?",
            options: ["25%", "50%", "75%", "90%"],
            correct: 1,
            explanation: "Â¡Correcto! Los ocÃ©anos, especialmente el fitoplancton marino, producen mÃ¡s del 50% del oxÃ­geno que respiramos."
        },
        {
            question: "â™»ï¸ Â¿CuÃ¡ntos aÃ±os tarda en degradarse una botella de plÃ¡stico en el ocÃ©ano?",
            options: ["50 aÃ±os", "100 aÃ±os", "450 aÃ±os", "1000 aÃ±os"],
            correct: 2,
            explanation: "Â¡Exacto! Una botella de plÃ¡stico puede tardar hasta 450 aÃ±os en degradarse, por eso es crucial reducir su uso."
        },
        {
            question: "ğŸŒ³ Â¿CuÃ¡nto COâ‚‚ puede absorber un Ã¡rbol adulto al aÃ±o?",
            options: ["5 kg", "22 kg", "50 kg", "100 kg"],
            correct: 1,
            explanation: "Â¡Bien! Un Ã¡rbol adulto absorbe aproximadamente 22 kg de COâ‚‚ por aÃ±o, por eso plantar Ã¡rboles es tan importante."
        },
        {
            question: "ğŸ’§ Â¿QuÃ© porcentaje del agua en la Tierra es potable y accesible?",
            options: ["0.007%", "1%", "5%", "10%"],
            correct: 0,
            explanation: "Â¡Correcto! Solo el 0.007% del agua del planeta es dulce, potable y accesible. Â¡CuidÃ©mosla!"
        },
        {
            question: "ğŸ Â¿QuÃ© porcentaje de cultivos alimentarios dependen de la polinizaciÃ³n de abejas?",
            options: ["25%", "50%", "75%", "90%"],
            correct: 2,
            explanation: "Â¡SÃ­! El 75% de los cultivos que comemos dependen de las abejas y otros polinizadores."
        }
    ];
    
    let currentQuestion = 0;
    let score = 0;
    let answered = false;
    
    function loadQuestion() {
        const question = quizQuestions[currentQuestion];
        document.getElementById('question-text').textContent = question.question;
        
        const optionsContainer = document.getElementById('quiz-options');
        optionsContainer.innerHTML = '';
        
        question.options.forEach((option, index) => {
            const optionDiv = document.createElement('div');
            optionDiv.className = 'quiz-option';
            optionDiv.textContent = option;
            optionDiv.onclick = () => checkAnswer(index);
            optionsContainer.appendChild(optionDiv);
        });
        
        document.getElementById('quiz-feedback').style.display = 'none';
        document.getElementById('next-question').style.display = 'none';
        answered = false;
    }
    
    function checkAnswer(selectedIndex) {
        if (answered) return;
        
        answered = true;
        const question = quizQuestions[currentQuestion];
        const options = document.querySelectorAll('.quiz-option');
        const feedback = document.getElementById('quiz-feedback');
        
        options.forEach((option, index) => {
            if (index === question.correct) {
                option.classList.add('correct');
            } else if (index === selectedIndex) {
                option.classList.add('incorrect');
            }
            option.style.pointerEvents = 'none';
        });
        
        if (selectedIndex === question.correct) {
            score++;
            feedback.textContent = 'ğŸ‰ ' + question.explanation;
            feedback.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';
            feedback.style.color = 'white';
        } else {
            feedback.textContent = 'âŒ ' + question.explanation;
            feedback.style.background = 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)';
            feedback.style.color = 'white';
        }
        
        feedback.style.display = 'block';
        
        document.getElementById('quiz-score').textContent = `PuntuaciÃ³n: ${score}/${quizQuestions.length}`;
        
        if (currentQuestion < quizQuestions.length - 1) {
            document.getElementById('next-question').style.display = 'inline-block';
        } else {
            setTimeout(() => {
                alert(`ğŸŠ Quiz completado! Tu puntuaciÃ³n final: ${score}/${quizQuestions.length}\n\n${getScoreMessage(score)}`);
                currentQuestion = 0;
                score = 0;
                loadQuestion();
            }, 2000);
        }
    }
    
    function getScoreMessage(score) {
        const percentage = (score / quizQuestions.length) * 100;
        if (percentage === 100) return "Â¡Perfecto! Eres un experto ambiental ğŸŒŸ";
        if (percentage >= 80) return "Â¡Excelente! Tienes gran conciencia ambiental ğŸŒŠ";
        if (percentage >= 60) return "Â¡Bien hecho! Vas por buen camino ğŸŒ±";
        return "Sigue aprendiendo, cada paso cuenta ğŸ’š";
    }
    
    // ==================== CONTADOR DE ESTADÃSTICAS ====================
    function animateCounter(element) {
        const target = parseFloat(element.getAttribute('data-target'));
        const duration = 2000;
        const increment = target / (duration / 16);
        let current = 0;
        
        const timer = setInterval(() => {
            current += increment;
            if (current >= target) {
                element.textContent = target.toLocaleString();
                clearInterval(timer);
            } else {
                if (target < 10) {
                    element.textContent = current.toFixed(1);
                } else {
                    element.textContent = Math.floor(current).toLocaleString();
                }
            }
        }, 16);
    }
    
    // ==================== INICIALIZACIÃ“N ====================
    document.addEventListener('DOMContentLoaded', function() {
        // Iniciar rotaciÃ³n de frases
        rotateQuote();
        setInterval(rotateQuote, 8000);
        
        // Cargar quiz
        loadQuestion();
        
        document.getElementById('next-question').addEventListener('click', () => {
            currentQuestion++;
            loadQuestion();
        });
        
        // Observar estadÃ­sticas
        const statsObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const numbers = entry.target.querySelectorAll('.stat-number');
                    numbers.forEach(num => {
                        if (!num.classList.contains('animated')) {
                            num.classList.add('animated');
                            animateCounter(num);
                        }
                    });
                }
            });
        }, { threshold: 0.5 });
        
        const statsSection = document.querySelector('.stats-section');
        if (statsSection) {
            statsObserver.observe(statsSection);
        }
    });
</script>
{% endblock %}